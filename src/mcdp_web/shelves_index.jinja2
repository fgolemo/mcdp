<!DOCTYPE html>
<html lang="en">
<head>
    <title>List of shelves</title>
    {% include 'head.jinja2' %}
    <style>{% include 'shelves_index.css' %}</style>
    <script>{% include 'shelves_index.js' %}</script>

</head>
<body>
    <!-- /*<style> body { display: none; } </style>*/ -->

{% include 'user.jinja2' %}
{% include 'model_views_navigation.jinja2' %}
{% from 'user_name_and_picture.jinja2' import user_name_and_picture with context %}
{% from 'list_libraries_for_shelf.jinja2' import list_libraries_for_shelf with context %}
{% from 'shelf_row.jinja2' import shelf_row with context %}

<p>MCDP libraries are organized in <em>shelves</em>.
    These are all the <em>shelves</em> available to you. If you wish to use the libraries
    in a particular shelf, you need to activate it here first.</p>

<table class="shelves_list" cellspacing="0" cellpadding="0">
    <thead>
        <tr>
            <th>Shelf name</th>
            <th>Permissions</th>
            <th>description</th>
            <th colspan=2>status</th>
        </tr>
    </thead>
    {% for shelf_name, shelf in navigation.shelves_available.items() %}

        {{shelf_row(shelf_name, shelf)}}
        {% if shelf_can_read(shelf_name) %}
        <tr style='display:none' id="contents-{{shelf_name}}">
            <td colspan=6>

                {% if shelf.get_authors() %}
                <table><tr>
                    <td>Authors:</td>
                    {% for author in shelf.get_authors()%}
                    <td>{{ user_name_and_picture(author) }}</td>
                    {% endfor %}
                </tr></table>
                {% endif %}

                <!-- <p>This shelf contains {{ shelf.get_libraries_path() | length}} libraries:</p> -->
                <div style='column-width: 15em'>
                    {{list_libraries_for_shelf(shelf_name, shelf)}}
                </div>
             </td>
        </tr>
        {% endif %}

        <script>setup("{{shelf_name}}");</script>
{% endfor %}
</table>

{% include 'footer.jinja2' %}


<!--
<script>
    $(document).ready(function() {
        $("body").show();
    });
</script> -->

</body>
</html>
